CREATE TABLE gl_ESCOLA (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(100) NOT NULL,
    CIDADE VARCHAR2(50) NOT NULL,
    ESTADO VARCHAR2(2) NOT NULL,
    ATIVO CHAR(1) DEFAULT 'S' CHECK (ATIVO IN ('S', 'N'))
);

CREATE TABLE GL_SENSOR (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    IDESCOLA NUMBER NOT NULL,
    LOCALIZACAO VARCHAR2(100) NOT NULL,
    ATIVO CHAR(1) DEFAULT 'S' CHECK (ATIVO IN ('S', 'N')),
    TIPO VARCHAR2(50) NOT NULL,
    DESCRICAO VARCHAR2(255),

    CONSTRAINT FK_SENSOR_ESCOLA FOREIGN KEY (IDESCOLA)
        REFERENCES GL_ESCOLA(ID)
);

CREATE TABLE GL_LEITURA (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    IDSENSOR NUMBER NOT NULL,
    TEMPERATURA NUMBER(5,2),
    UMIDADE NUMBER(5,2),
    TIMESTAMP_LEITURA TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT FK_LEITURA_SENSOR FOREIGN KEY (IDSENSOR)
        REFERENCES GL_SENSOR(ID)
);


CREATE TABLE GL_ALERTA (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    IDLEITURA NUMBER NOT NULL,
    TIPO VARCHAR2(50),
    MENSAGEM VARCHAR2(255),
    NIVEL VARCHAR2(20),
    STATUS VARCHAR2(20) DEFAULT 'EMITIDO',
    TIMESTAMP_ALERTA TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT FK_ALERTA_LEITURA FOREIGN KEY (IDLEITURA)
        REFERENCES GL_LEITURA(ID)
);
